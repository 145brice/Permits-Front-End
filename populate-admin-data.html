<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Populate Firebase Admin Data</title>
</head>
<body>
    <h1>Populate Firebase with Admin Data</h1>
    <button onclick="populateFirebase()">Populate Firebase Collections</button>
    <div id="status"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getFirestore, collection, addDoc, writeBatch, doc } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBGpgnX5JFpmu2hnUploVR50t2X7Uqk_-E",
            authDomain: "permits-19158.firebaseapp.com",
            projectId: "permits-19158",
            storageBucket: "permits-19158.firebasestorage.app",
            messagingSenderId: "963119389978",
            appId: "1:963119389978:web:255453c4794988c3f8e0a3",
            measurementId: "G-YX2270HJG7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Mock data - Updated with accurate numbers
        const citiesData = [
            { name: 'Nashville', leads: 3, files: 1 },
            { name: 'Chattanooga', leads: 2, files: 1 },
            { name: 'Austin', leads: 1, files: 1 },
            { name: 'San Antonio', leads: 1, files: 1 },
            { name: 'Houston', leads: 1, files: 1 },
            { name: 'Charlotte', leads: 1, files: 1 },
            { name: 'Phoenix', leads: 1, files: 1 },
            { name: 'Philadelphia', leads: 0, files: 0 },
            { name: 'Seattle', leads: 0, files: 0 },
            { name: 'Chicago', leads: 0, files: 0 }
        ];

        const leadsData = [
            { date: '2025-12-04', city: 'Nashville', permit_type: 'Building', permit_number: 'NSH251204001', address: '123 Main St', description: 'New construction' },
            { date: '2025-12-04', city: 'Nashville', permit_type: 'Building', permit_number: 'NSH251204002', address: '456 Oak Ave', description: 'Addition' },
            { date: '2025-12-04', city: 'Nashville', permit_type: 'Building', permit_number: 'NSH251204003', address: '789 Pine St', description: 'Renovation' },
            { date: '2025-12-04', city: 'Chattanooga', permit_type: 'Building', permit_number: 'CHT251204001', address: '321 Elm St', description: 'New home' },
            { date: '2025-12-04', city: 'Chattanooga', permit_type: 'Building', permit_number: 'CHT251204002', address: '654 Maple Dr', description: 'Garage' },
            { date: '2025-12-04', city: 'Austin', permit_type: 'Building', permit_number: 'AUS251204001', address: '987 Cedar Ln', description: 'Pool house' },
            { date: '2025-12-04', city: 'San Antonio', permit_type: 'Building', permit_number: 'SAT251204001', address: '147 Birch Rd', description: 'Kitchen remodel' },
            { date: '2025-12-04', city: 'Houston', permit_type: 'Building', permit_number: 'HOU251204001', address: '258 Spruce St', description: 'Bathroom addition' },
            { date: '2025-12-04', city: 'Charlotte', permit_type: 'Building', permit_number: 'CLT251204001', address: '369 Willow Ave', description: 'Deck construction' },
            { date: '2025-12-04', city: 'Phoenix', permit_type: 'Building', permit_number: 'PHX251204001', address: '741 Palm Dr', description: 'Patio cover' }
        ];

        async function populateFirebase() {
            const status = document.getElementById('status');
            status.textContent = 'Starting data population...';

            try {
                // Clear existing data first
                await clearCollection('admin_cities');
                await clearCollection('admin_leads');

                status.textContent = 'Cleared existing data...';

                // Add cities data
                const batch = writeBatch(db);
                citiesData.forEach((city, index) => {
                    const docRef = doc(collection(db, 'admin_cities'));
                    batch.set(docRef, city);
                });
                await batch.commit();

                status.textContent = 'Added cities data...';

                // Add leads data
                for (const lead of leadsData) {
                    await addDoc(collection(db, 'admin_leads'), lead);
                }

                status.textContent = '✅ Successfully populated Firebase with admin data!';
                console.log('Data populated successfully');

            } catch (error) {
                status.textContent = '❌ Error: ' + error.message;
                console.error('Error populating data:', error);
            }
        }

        async function clearCollection(collectionName) {
            const querySnapshot = await getDocs(collection(db, collectionName));
            const batch = writeBatch(db);

            querySnapshot.forEach((doc) => {
                batch.delete(doc.ref);
            });

            await batch.commit();
        }

        // Make functions available globally
        window.populateFirebase = populateFirebase;
    </script>
</body>
</html></content>
<parameter name="filePath">/Users/briceleasure/Desktop/contractor-leads-saas/populate-admin-data.html